import:
- ./build/taskctl/contexts.yaml
- ./build/taskctl/tasks.yaml

pipelines:

  docs:
    - task: _docs

  tests:
    - task: tests:unit
    - task: tests:coverage_report
      depends_on:
        - tests:unit

  build:
    - task: generate
  
  release:
    - task: setup:environment
    - task: update:dashboard
      depends_on:
        - setup:environment
    - task: publish:github
      depends_on:
        - setup:environment
    
  all:
    - task: clean
    - pipeline: docs
      depends_on:
        - clean
    - pipeline: tests
      depends_on:
        - clean
    - pipeline: build
      depends_on:
        - clean
    # NB: `release` is not declared here, as it must be run as a discrete pipeline to ensure tests/etc. are passed.
